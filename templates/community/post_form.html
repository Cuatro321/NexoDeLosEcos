{% extends 'base.html' %}
{% block title %}{% if form.instance.pk %}Editar publicación{% else %}Nueva publicación{% endif %} · Comunidad{% endblock %}

{% block content %}
<section class="section">
  <h1 class="h1-glow text-2xl md:text-3xl">
    {% if form.instance.pk %}Editar{% else %}Nueva{% endif %} publicación
  </h1>

  <form method="post" enctype="multipart/form-data" class="grid md:grid-cols-2 gap-5 form-light mt-4">
    {% csrf_token %}
    <div class="card">
      <label class="block mb-2">Título</label>
      {{ form.title }}

      <div class="hr-soft"></div>
      <label class="block mb-2 mt-1">Tipo</label>
      {{ form.type }}

      <div class="hr-soft"></div>
      <label class="block mb-2 mt-1">Contenido</label>
      {{ form.body }}
      <p class="help mt-2">Puedes usar saltos de línea.</p>
    </div>

    <div class="card">
      <label class="block mb-2">Imagen (opcional)</label>
      {{ form.image }}
      {% if form.instance.image %}
        <div class="mt-3" style="aspect-ratio:16/9;overflow:hidden;border:1px solid var(--line);border-radius:.5rem">
          <img src="{{ form.instance.image.url }}" style="width:100%;height:100%;object-fit:cover" alt="">
        </div>
      {% endif %}

      <button class="lol-button mt-4">
        <span class="lol-button-text"><i class="fa-solid fa-check mr-2"></i>Guardar</span>
        <span class="lol-button-shine"></span>
      </button>
    </div>
  </form>
</section>
{% endblock %}
