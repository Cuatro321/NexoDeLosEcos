{% extends "base.html" %}
{% load static %}
{% block title %}{{ item.title }} · Historia{% endblock %}
{% block content %}
<section class="section">
  <div class="card">
    <h1 class="h1-glow text-3xl">{{ item.title }}</h1>
    {% if item.domain %}<p class="text-white/60 mt-1">Dominio: <a class="link-soft" href="{{ item.domain.get_absolute_url }}">{{ item.domain.name }}</a></p>{% endif %}
    {% if item.cover_image %}
    <div class="mt-3" style="aspect-ratio:16/9;overflow:hidden;border:1px solid var(--line);border-radius:.5rem">
      <img src="{{ item.cover_image.url }}" alt="" style="width:100%;height:100%;object-fit:cover">
    </div>
    {% endif %}
    {% if item.video_url %}
    <video class="mt-3" controls style="width:100%;border-radius:.5rem;border:1px solid var(--line)">
      <source src="{{ item.video_url }}" type="video/mp4">
    </video>
    {% endif %}
    <div class="prose mt-4">{{ item.body|linebreaks }}</div>

    {% if item.gallery.all %}
    <div class="hr-soft"></div>
    <h3 class="card-title">Galería</h3>
    <div class="grid md:grid-cols-4 gap-3">
      {% for a in item.gallery.all %}
        {% if a.kind == 'video' %}
          <video controls style="width:100%;border-radius:.5rem;border:1px solid var(--line)"><source src="{{ a.file.url }}"></video>
        {% else %}
          <img src="{{ a.file.url }}" alt="{{ a.caption }}" style="width:100%;border-radius:.5rem;border:1px solid var(--line)">
        {% endif %}
      {% endfor %}
    </div>
    {% endif %}
  </div>
</section>
{% endblock %}
